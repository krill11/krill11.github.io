<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>polycarbonate</title>
    <link rel="icon" type="image/png" href="avatar.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jersey+10&family=Space+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .albums-link {
            margin-top: -8px;
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
    <div id="site-background"></div>
    <div id="global-rain-overlay" class="rain-overlay global-rain"></div>
    <div class="title">POLYCARBONAT<span class="broken">E</span></div>
    <main>
        <div class="column-left">
            <div class="card" data-section="about">
                <img src="mewo.png" class="sitting-cat" alt="Pixel cat">
                <div class="card-header">
                    <div class="pixel-heart">
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel black"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel black"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-yellow"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-purple"></div>
                        <div class="pixel black"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel nb-white"></div>
                        <div class="pixel black"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                    </div>
                    <span>ABOUT ME</span>
                </div>
                <div class="card-content">
                    <div class="profile-section">
                        <div class="avatar-container">
                            <div class="avatar-placeholder">
                                <img src="avatar.png" alt="Profile picture">
                            </div>
                            <div class="pronouns">cad genius</div>
                        </div>
                        <div class="bio">
                            hey, i'm polycarbonate/coral, a young mechanical engineer<br><br>
                            i love<br>
                            <span class="bullet">*</span>robotics<br>
                            <span class="bullet">*</span>making and listening to music<br>
                            <span class="bullet">*</span>coding<br>
                            <span class="bullet">*</span>computers
                        </div>
                    </div>
                </div>
            </div>
            <div class="badge-banner">
                <div class="badge-scroll">
                    <!-- First set -->
                    <img src="badges/ah.gif" alt="AH" class="badge">
                    <img src="badges/captain-hawkes.neocities.org.gif" alt="Captain Hawkes" class="badge">
                    <img src="badges/c64ik.gif" alt="C64" class="badge">
                    <img src="badges/buyebaystuff88x31.gif" alt="Buy eBay Stuff" class="badge">
                    <img src="badges/7zip.gif" alt="7-Zip" class="badge">
                    <img src="badges/tj88x31.gif" alt="TJ" class="badge">
                    <img src="badges/badge.gif" alt="Badge" class="badge">
                    <img src="badges/bvwe.gif" alt="BVWE" class="badge">
                    <img src="badges/nvidia.gif" alt="NVIDIA" class="badge">
                    <img src="badges/camtime.png" alt="Cam Time" class="badge">
                    <img src="badges/asus-clr_19970504.gif" alt="ASUS" class="badge">
                    <img src="badges/bestwithmie.gif" alt="Best with MIE" class="badge">
                    <img src="badges/browsemoz.gif" alt="Browse with Mozilla" class="badge">
                    <img src="badges/anyall.png" alt="Any/All" class="badge">
                    <img src="badges/discord.gif" alt="Discord" class="badge">
                    <img src="badges/piracy.gif" alt="Piracy" class="badge">
                    <img src="badges/archlinux.gif" alt="Arch Linux" class="badge">
                    <img src="badges/88x31 site button.png" alt="Site Button" class="badge">
                    <img src="badges/88x31.gif" alt="88x31" class="badge">
                    <img src="badges/virtualdiva.gif" alt="Virtual Diva" class="badge">
                    <img src="badges/immjs.dev.gif" alt="immjs.dev" class="badge">
                    <!-- Second set -->
                    <img src="badges/ah.gif" alt="AH" class="badge">
                    <img src="badges/captain-hawkes.neocities.org.gif" alt="Captain Hawkes" class="badge">
                    <img src="badges/c64ik.gif" alt="C64" class="badge">
                    <img src="badges/buyebaystuff88x31.gif" alt="Buy eBay Stuff" class="badge">
                    <img src="badges/7zip.gif" alt="7-Zip" class="badge">
                    <img src="badges/tj88x31.gif" alt="TJ" class="badge">
                    <img src="badges/badge.gif" alt="Badge" class="badge">
                    <img src="badges/bvwe.gif" alt="BVWE" class="badge">
                    <img src="badges/nvidia.gif" alt="NVIDIA" class="badge">
                    <img src="badges/camtime.png" alt="Cam Time" class="badge">
                    <img src="badges/asus-clr_19970504.gif" alt="ASUS" class="badge">
                    <img src="badges/bestwithmie.gif" alt="Best with MIE" class="badge">
                    <img src="badges/browsemoz.gif" alt="Browse with Mozilla" class="badge">
                    <img src="badges/anyall.png" alt="Any/All" class="badge">
                    <img src="badges/discord.gif" alt="Discord" class="badge">
                    <img src="badges/piracy.gif" alt="Piracy" class="badge">
                    <img src="badges/archlinux.gif" alt="Arch Linux" class="badge">
                    <img src="badges/88x31 site button.png" alt="Site Button" class="badge">
                    <img src="badges/88x31.gif" alt="88x31" class="badge">
                    <img src="badges/virtualdiva.gif" alt="Virtual Diva" class="badge">
                    <img src="badges/immjs.dev.gif" alt="immjs.dev" class="badge">
                    <!-- Third set -->
                    <img src="badges/ah.gif" alt="AH" class="badge">
                    <img src="badges/captain-hawkes.neocities.org.gif" alt="Captain Hawkes" class="badge">
                    <img src="badges/c64ik.gif" alt="C64" class="badge">
                    <img src="badges/buyebaystuff88x31.gif" alt="Buy eBay Stuff" class="badge">
                    <img src="badges/7zip.gif" alt="7-Zip" class="badge">
                    <img src="badges/tj88x31.gif" alt="TJ" class="badge">
                    <img src="badges/badge.gif" alt="Badge" class="badge">
                    <img src="badges/bvwe.gif" alt="BVWE" class="badge">
                    <img src="badges/nvidia.gif" alt="NVIDIA" class="badge">
                    <img src="badges/camtime.png" alt="Cam Time" class="badge">
                    <img src="badges/asus-clr_19970504.gif" alt="ASUS" class="badge">
                    <img src="badges/bestwithmie.gif" alt="Best with MIE" class="badge">
                    <img src="badges/browsemoz.gif" alt="Browse with Mozilla" class="badge">
                    <img src="badges/anyall.png" alt="Any/All" class="badge">
                    <img src="badges/discord.gif" alt="Discord" class="badge">
                    <img src="badges/piracy.gif" alt="Piracy" class="badge">
                    <img src="badges/archlinux.gif" alt="Arch Linux" class="badge">
                    <img src="badges/88x31 site button.png" alt="Site Button" class="badge">
                    <img src="badges/88x31.gif" alt="88x31" class="badge">
                    <img src="badges/virtualdiva.gif" alt="Virtual Diva" class="badge">
                    <img src="badges/immjs.dev.gif" alt="immjs.dev" class="badge">
                </div>
            </div>
            <div class="card" data-section="albums">
                <img src="sign2.png" class="hanging-sign" alt="Sign">
                <div class="card-header">
                    <div class="pixel-note">
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel note"></div>
                        <div class="pixel note"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                    </div>
                    <span>FAVORITE LISTENS</span>
                </div>
                <div class="card-content">
                    <a href="/albums" class="star-link albums-link">View Full Albums Collection</a>
                    <div class="album-grid">
                        <div class="album">
                            <img src="images/1000_gecs-100_gecs.jpg" alt="1000 gecs" class="album-cover">
                            <div class="album-info">
                                <div class="album-title">1000 gecs</div>
                                <div class="album-artist">100 gecs</div>
                            </div>
                        </div>
                        <div class="album">
                            <img src="images/unkillable_angel-ada_rook.jpg" alt="UNKILLABLE ANGEL" class="album-cover">
                            <div class="album-info">
                                <div class="album-title">UNKILLABLE ANGEL</div>
                                <div class="album-artist">ada rook</div>
                            </div>
                        </div>
                        <div class="album">
                            <img src="images/three_cheers.jpg" alt="Three Cheers for Sweet Revenge" class="album-cover">
                            <div class="album-info">
                                <div class="album-title">Three Cheers for Sweet Revenge</div>
                                <div class="album-artist">My Chemical Romance</div>
                            </div>
                        </div>
                        <div class="album">
                            <img src="images/ugly_death-ada_rook.png"
                                alt="UGLY DEATH NO REDEMPTION ANGEL CURSE I LOVE YOU" class="album-cover">
                            <div class="album-info">
                                <div class="album-title">UGLY DEATH NO REDEMPTION ANGEL CURSE I LOVE YOU</div>
                                <div class="album-artist">ada rook</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card" data-section="projects">
                <div class="card-header">
                    <div class="pixel-star" style="transform: rotate(45deg);">
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                    </div>
                    <span>PROJECTS</span>
                </div>
                <div class="card-content">
                    <div class="project">
                        <h3>Triple Fault - FIRST Tech Challenge Team</h3>
                        <div class="project-details">
                            <span class="role">President & Lead Engineer</span>
                            <span class="achievement">2025 World Championships Qualifier</span>
                        </div>
                        <p>Leading Team Triple Fault and our competition robot Kanagawa to the FIRST Tech Challenge
                            World Championships in 2025.</p>
                        <a href="https://3fault.com" target="_blank" class="project-link">Visit Team Website â†’</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="column-right">
            <div class="card" data-section="stars">
                <img src="sign1.png" class="hanging-sign-right" alt="Sign">
                <div class="card-header">
                    <div class="pixel-star">
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel star"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel outline"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                        <div class="pixel"></div>
                    </div>
                    <span>STARS</span>
                </div>
                <div class="card-content">
                    <a href="https://3fault.com" target="_blank" class="star-link">3fault</a>
                    <a href="https://github.com/krill11" target="_blank" class="star-link">GitHub</a>
                    <a href="https://www.youtube.com/@ubuntuuser" target="_blank" class="star-link">YouTube</a>
                    <a href="/vco_demo" class="star-link">VCO Demo</a>
                    <a href="/into_the_deep" class="star-link">FTC Game</a>
                    <a href="/itsterminal" class="star-link">:3</a>
                </div>
            </div>
            <div class="card" data-section="status">
                <div class="card-header status-header">
                    <span>STATUS</span>
                </div>
                <div class="card-content">
                    ðŸª» among the flowers, face to face with the sky.
                </div>
            </div>
            <div class="card" data-section="atmosphere">
                <div class="atmosphere-container">
                    <img id="atmosphere-image" alt="Atmosphere" class="atmosphere-image">
                    <div id="rain-overlay" class="rain-overlay"></div>
                    <div id="thunder-overlay" class="thunder-overlay"></div>
                    <div id="fog-overlay" class="fog-overlay"></div>
                    <div class="atmosphere-header text-white">
                        <span>CSTATUS</span>
                    </div>
                    <div class="atmosphere-info">
                        <span id="atmosphere-time">--:--</span>
                        <span id="atmosphere-temp">--Â°F</span>
                    </div>
                </div>
            </div>
            <div class="card" data-section="setup">
                <div class="card-header">
                    <span>CURRENT SETUP</span>
                </div>
                <div class="setup-content">
                    <img src="zeph.png" alt="Zephyrus G14 2024" class="setup-image">
                    <ul class="setup-specs">
                        <li>Zephyrus g14 (2024)</li>
                        <li>Ryzen 9</li>
                        <li>RTX 4070</li>
                        <li>32gb Ram</li>
                    </ul>
                </div>
            </div>
            <div class="card" data-section="webring">
                <div class="card-header">
                    <span>WEBRING</span>
                </div>
                <div class="card-content webring-content">
                    <iframe width="180" height="180" style="border:none" src="https://dimden.neocities.org/navlink/"
                        name="neolink"></iframe>
                </div>
            </div>
        </div>
    </main>
    <footer class="footer">
        <span>&copy; polycarbonate 2025</span>
    </footer>
    <script>
        const ATMOSPHERE_CONFIG = {
            lat: 30.628,
            long: -96.334,
            timezone: 'America/Chicago'
        };

        const WEATHER_CODES = {
            clear: [0, 1],
            cloudy: [2, 3, 45, 48],
            rain: [51, 53, 55, 56, 57, 61, 63, 65, 66, 67, 80, 81, 82],
            thunder: [95, 96, 99]
        };

        function updateTime() {
            const now = new Date().toLocaleString("en-US", { timeZone: ATMOSPHERE_CONFIG.timezone });
            const date = new Date(now);
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            document.getElementById('atmosphere-time').textContent = `${hours}:${minutes}`;
            return date.getHours(); // Return hours for day/night check
        }

        async function updateWeather() {
            try {
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${ATMOSPHERE_CONFIG.lat}&longitude=${ATMOSPHERE_CONFIG.long}&current=temperature_2m,weather_code,is_day,wind_speed_10m&temperature_unit=fahrenheit&wind_speed_unit=mph&timezone=${ATMOSPHERE_CONFIG.timezone}`
                );
                const data = await response.json();

                const temp = Math.round(data.current.temperature_2m);
                const code = data.current.weather_code;
                const isDay = data.current.is_day === 1;
                const windSpeed = data.current.wind_speed_10m;

                document.getElementById('atmosphere-temp').textContent = `${temp}Â°F`;
                updateAtmosphereVisuals(code, isDay, windSpeed);
            } catch (error) {
                console.error('Failed to fetch weather:', error);
            }
        }

        function updateAtmosphereVisuals(code, isDay, windSpeed = 0) {
            const img = document.getElementById('atmosphere-image');
            const rainOverlay = document.getElementById('rain-overlay');
            const thunderOverlay = document.getElementById('thunder-overlay');
            const fogOverlay = document.getElementById('fog-overlay');
            const header = document.querySelector('.atmosphere-header');

            // Reset overlays
            rainOverlay.classList.remove('active');
            thunderOverlay.classList.remove('active');
            fogOverlay.classList.remove('active');

            let imageSrc = '';
            let isRainy = false;

            // Determine base image
            if (WEATHER_CODES.clear.includes(code)) {
                imageSrc = isDay ? 'atmosphere/clear_day.png' : 'atmosphere/clear_night.png';
            } else if (WEATHER_CODES.cloudy.includes(code)) {
                imageSrc = isDay ? 'atmosphere/day_clouds.png' : 'atmosphere/night_clouds.png';
            } else if (WEATHER_CODES.rain.includes(code) || WEATHER_CODES.thunder.includes(code)) {
                // For rain/thunder, use cloudy base
                imageSrc = isDay ? 'atmosphere/day_clouds.png' : 'atmosphere/night_clouds.png';
                rainOverlay.classList.add('active');
                isRainy = true;

                if (WEATHER_CODES.thunder.includes(code)) {
                    thunderOverlay.classList.add('active');
                }
            } else {
                // Default fallback
                imageSrc = isDay ? 'atmosphere/clear_day.png' : 'atmosphere/clear_night.png';
            }

            // Fog Logic (Codes 45, 48)
            if ([45, 48].includes(code)) {
                fogOverlay.classList.add('active');
                // Fog often comes with clouds
                if (!isRainy) {
                    imageSrc = isDay ? 'atmosphere/day_clouds.png' : 'atmosphere/night_clouds.png';
                }
            }

            // Text Color Logic
            // White at night OR if it's rainy (even during day)
            // Black during day (unless rainy)
            header.classList.remove('text-white', 'text-black');
            if (!isDay || isRainy) {
                header.classList.add('text-white');
            } else {
                header.classList.add('text-black');
            }

            // Rain Generation Logic
            if (isRainy) {
                // Calculate rain angle based on wind speed
                // Negative angle for leftward fall
                const baseAngle = 10;
                const windFactor = Math.min(windSpeed, 40); // Cap at 40mph
                const angle = -(baseAngle + (windFactor * 1.5)); // Negative for leftward

                rainOverlay.style.setProperty('--rain-angle', `${angle}deg`);

                // Determine Rain Density based on Weather Code
                // Tripled counts to cover wider spawn area (-100% to 200%)
                let dropCount = 1200; // Default (Moderate)

                // Light Rain: 61, 80
                if ([61, 80].includes(code)) {
                    dropCount = 600;
                }
                // Moderate Rain: 63, 81, 95 (Thunderstorm slight/mod)
                else if ([63, 81, 95].includes(code)) {
                    dropCount = 1500;
                }
                // Heavy Rain: 65, 82, 96, 99
                else if ([65, 82, 96, 99].includes(code)) {
                    dropCount = 3000; // Very dense
                }

                // Check if drops already exist or if density changed significantly
                // For simplicity, we'll clear and regenerate if count differs significantly or just regenerate always for now to ensure density update
                // Optimization: Only regenerate if child count differs
                if (rainOverlay.children.length !== dropCount) {
                    rainOverlay.innerHTML = ''; // Clear existing

                    for (let i = 0; i < dropCount; i++) {
                        const drop = document.createElement('div');
                        drop.classList.add('drop');
                        // Wider spread to cover diagonal fall: -100% to 400% to ensure coverage at high angles
                        drop.style.left = `${Math.random() * 500 - 100}%`;

                        // Speed: Heavy rain falls faster
                        let minSpeed = 0.8;
                        let maxSpeed = 1.5;

                        if (dropCount > 1500) { // Heavy
                            minSpeed = 0.5;
                            maxSpeed = 0.9;
                        }

                        // Randomize duration more to prevent "sheets"
                        const duration = minSpeed + Math.random() * (maxSpeed - minSpeed);
                        drop.style.animationDuration = `${duration}s`;

                        // Negative delay for continuous flow, randomized over a larger window than duration to break patterns
                        drop.style.animationDelay = `-${Math.random() * duration * 2}s`;

                        // Randomize trail length
                        drop.style.height = `${40 + Math.random() * 40}px`;

                        // Randomize opacity for depth effect
                        drop.style.opacity = `${0.3 + Math.random() * 0.5}`;

                        rainOverlay.appendChild(drop);
                    }
                }
            } else {
                // Clear drops if not rainy
                rainOverlay.innerHTML = '';
            }

            // Only update if source changed to avoid flickering
            if (img.getAttribute('src') !== imageSrc) {
                img.classList.remove('loaded'); // Fade out

                // Create a temporary image to preload
                const tempImg = new Image();
                tempImg.onload = () => {
                    img.src = imageSrc;
                    // Small delay to ensure DOM update before fading in
                    requestAnimationFrame(() => {
                        img.classList.add('loaded');
                    });
                };
                tempImg.src = imageSrc;
            } else {
                // Ensure loaded class is present if image is already correct (e.g. on first load if src matches default)
                if (!img.classList.contains('loaded')) {
                    img.classList.add('loaded');
                }
            }
        }

        // Initial update
        updateTime();
        updateWeather();

        // Update time every second
        setInterval(updateTime, 1000);

        // Update weather every 10 minutes
        setInterval(updateWeather, 600000);

        function initGlobalRain() {
            const rainOverlay = document.getElementById('global-rain-overlay');
            const dropCount = 1500; // Moderate to heavy rain
            const angle = -10; // 10 degrees to the left

            rainOverlay.style.setProperty('--rain-angle', `${angle}deg`);
            rainOverlay.classList.add('active');

            for (let i = 0; i < dropCount; i++) {
                const drop = document.createElement('div');
                drop.classList.add('drop');
                // Wider spread to cover diagonal fall
                drop.style.left = `${Math.random() * 200 - 50}%`;

                // Speed (Duration in seconds) - Slower means higher duration
                // Original: 0.5 to 0.9
                // New (approx 30% slower speed = ~1.43x duration): 0.7 to 1.3
                let minDuration = 0.7;
                let maxDuration = 1.3;

                const duration = minDuration + Math.random() * (maxDuration - minDuration);
                drop.style.animationDuration = `${duration}s`;
                drop.style.animationDelay = `-${Math.random() * duration * 2}s`;

                // 2x Larger (Height)
                // Original: 40 + random * 40
                // New: 80 + random * 80
                drop.style.height = `${80 + Math.random() * 80}px`;
                drop.style.opacity = `${0.3 + Math.random() * 0.5}`;

                rainOverlay.appendChild(drop);
            }
        }

        initGlobalRain();
    </script>
</body>

</html>