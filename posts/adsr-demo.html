<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: transparent;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', sans-serif;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .visualizer {
            width: 100%;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
        }
        input[type="range"] {
            width: 100%;
            background: linear-gradient(135deg, #0071e3, #00a0ff);
        }
        .value-display {
            font-family: monospace;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="adsrVisualizer" class="visualizer"></canvas>
        <div class="controls">
            <div class="control-group">
                <label for="attack">Attack: <span id="attackDisplay" class="value-display">0.1</span>s</label>
                <input type="range" id="attack" min="0" max="2" value="0.1" step="0.01">
            </div>
            <div class="control-group">
                <label for="decay">Decay: <span id="decayDisplay" class="value-display">0.2</span>s</label>
                <input type="range" id="decay" min="0" max="2" value="0.2" step="0.01">
            </div>
            <div class="control-group">
                <label for="sustain">Sustain: <span id="sustainDisplay" class="value-display">0.7</span></label>
                <input type="range" id="sustain" min="0" max="1" value="0.7" step="0.01">
            </div>
            <div class="control-group">
                <label for="release">Release: <span id="releaseDisplay" class="value-display">0.5</span>s</label>
                <input type="range" id="release" min="0" max="2" value="0.5" step="0.01">
            </div>
        </div>
    </div>

    <script>
        const adsr = {
            attack: 0.1,
            decay: 0.2,
            sustain: 0.7,
            release: 0.5
        };

        function setupCanvas() {
            const canvas = document.getElementById('adsrVisualizer');
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
            return ctx;
        }

        function drawAdsrEnvelope() {
            const canvas = document.getElementById('adsrVisualizer');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            ctx.beginPath();
            ctx.strokeStyle = '#00ff00';
            ctx.lineWidth = 3;
            
            const totalTime = adsr.attack + adsr.decay + 1 + adsr.release; // 1s for sustain
            const timeScale = width / totalTime;
            
            // Starting point
            ctx.moveTo(0, height);
            
            // Attack phase
            ctx.lineTo(adsr.attack * timeScale, 0);
            
            // Decay phase
            ctx.lineTo((adsr.attack + adsr.decay) * timeScale, height * (1 - adsr.sustain));
            
            // Sustain phase
            ctx.lineTo((adsr.attack + adsr.decay + 1) * timeScale, height * (1 - adsr.sustain));
            
            // Release phase
            ctx.lineTo((adsr.attack + adsr.decay + 1 + adsr.release) * timeScale, height);
            
            ctx.stroke();
        }

        // Set up ADSR controls
        ['attack', 'decay', 'sustain', 'release'].forEach(param => {
            const slider = document.getElementById(param);
            const display = document.getElementById(param + 'Display');
            
            slider.addEventListener('input', (e) => {
                const value = parseFloat(e.target.value);
                adsr[param] = value;
                display.textContent = value.toFixed(2);
                drawAdsrEnvelope();
            });
        });

        // Initialize canvas and draw envelope
        window.addEventListener('load', () => {
            setupCanvas();
            drawAdsrEnvelope();
        });
    </script>
</body>
</html>